package kotlin

//
// NOTE THIS FILE IS AUTO-GENERATED by the GenerateStandardLib.kt
// See: https://github.com/JetBrains/kotlin/tree/master/libraries/stdlib
//

import java.util.*

/**
 * Returns element at index
 */
public fun <T> Stream<T>.elementAt(index : Int) : T {
    val iterator = iterator()
    var count = 0
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (index == count++)
            return element
    }
    throw IndexOutOfBoundsException("Collection doesn't contain element at index ")
    
    
}

/**
 * Returns element at index
 */
public fun <T> Iterable<T>.elementAt(index : Int) : T {
    if (this is List<*>)
        return get(index) as T
    val iterator = iterator()
    var count = 0
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (index == count++)
            return element
    }
    throw IndexOutOfBoundsException("Collection doesn't contain element at index ")
    
    
}

/**
 * Returns element at index
 */
public fun <T> List<T>.elementAt(index : Int) : T {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun <T> Array<T>.elementAt(index : Int) : T {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun ByteArray.elementAt(index : Int) : Byte {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun CharArray.elementAt(index : Int) : Char {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun DoubleArray.elementAt(index : Int) : Double {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun LongArray.elementAt(index : Int) : Long {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun IntArray.elementAt(index : Int) : Int {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun ShortArray.elementAt(index : Int) : Short {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun BooleanArray.elementAt(index : Int) : Boolean {
    return get(index)
    
}

/**
 * Returns element at index
 */
public fun FloatArray.elementAt(index : Int) : Float {
    return get(index)
    
}

/**
 * Returns first element
 */
public fun <T> Stream<T>.first() : T {
    val iterator = iterator()
    if (!iterator.hasNext())
        throw IllegalArgumentException("Collection is empty")
    return iterator.next()
    
}

/**
 * Returns first element
 */
public fun <T> Iterable<T>.first() : T {
    val iterator = iterator()
    if (!iterator.hasNext())
        throw IllegalArgumentException("Collection is empty")
    return iterator.next()
    
}

/**
 * Returns first element
 */
public fun <T> List<T>.first() : T {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun <T> Array<T>.first() : T {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun ByteArray.first() : Byte {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun CharArray.first() : Char {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun DoubleArray.first() : Double {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun LongArray.first() : Long {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun IntArray.first() : Int {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun ShortArray.first() : Short {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun BooleanArray.first() : Boolean {
    return this[0]
    
}

/**
 * Returns first element
 */
public fun FloatArray.first() : Float {
    return this[0]
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun <T> Stream<T>.first(predicate: (T) -> Boolean) : T {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun <T> Iterable<T>.first(predicate: (T) -> Boolean) : T {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun <T> Array<T>.first(predicate: (T) -> Boolean) : T {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun ByteArray.first(predicate: (Byte) -> Boolean) : Byte {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun CharArray.first(predicate: (Char) -> Boolean) : Char {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun DoubleArray.first(predicate: (Double) -> Boolean) : Double {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun LongArray.first(predicate: (Long) -> Boolean) : Long {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun IntArray.first(predicate: (Int) -> Boolean) : Int {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun ShortArray.first(predicate: (Short) -> Boolean) : Short {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun BooleanArray.first(predicate: (Boolean) -> Boolean) : Boolean {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*
 */
public fun FloatArray.first(predicate: (Float) -> Boolean) : Float {
    for (element in this) if (predicate(element)) return element
    throw IllegalArgumentException("No element matching predicate was found")
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun <T> Stream<T>.firstOrNull(predicate: (T) -> Boolean) : T? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun <T> Iterable<T>.firstOrNull(predicate: (T) -> Boolean) : T? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun <T> Array<T>.firstOrNull(predicate: (T) -> Boolean) : T? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun ByteArray.firstOrNull(predicate: (Byte) -> Boolean) : Byte? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun CharArray.firstOrNull(predicate: (Char) -> Boolean) : Char? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun DoubleArray.firstOrNull(predicate: (Double) -> Boolean) : Double? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun LongArray.firstOrNull(predicate: (Long) -> Boolean) : Long? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun IntArray.firstOrNull(predicate: (Int) -> Boolean) : Int? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun ShortArray.firstOrNull(predicate: (Short) -> Boolean) : Short? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun BooleanArray.firstOrNull(predicate: (Boolean) -> Boolean) : Boolean? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first element matching the given *predicate*, or *null* if element was not found
 */
public fun FloatArray.firstOrNull(predicate: (Float) -> Boolean) : Float? {
    for (element in this) if (predicate(element)) return element
    return null
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun <T> Stream<T>.indexOf(item: T) : Int {
    var index = 0
    for (element in this) {
        if (element == item)
            return index
        index++
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun <T> Iterable<T>.indexOf(item: T) : Int {
    var index = 0
    for (element in this) {
        if (element == item)
            return index
        index++
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun <T> Array<T>.indexOf(item: T) : Int {
    if (item == null) {
        for (i in indices) {
            if (this[i] == null) {
                return i
            }
        }
    } else {
        for (i in indices) {
            if (item == this[i]) {
                return i
            }
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun ByteArray.indexOf(item: Byte) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun CharArray.indexOf(item: Char) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun DoubleArray.indexOf(item: Double) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun LongArray.indexOf(item: Long) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun IntArray.indexOf(item: Int) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun ShortArray.indexOf(item: Short) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun BooleanArray.indexOf(item: Boolean) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns first index of item, or -1 if the array does not contain item
 */
public fun FloatArray.indexOf(item: Float) : Int {
    for (i in indices) {
        if (item == this[i]) {
            return i
        }
    }
    return -1
    
}

/**
 * Returns last element
 */
public fun <T> Stream<T>.last() : T {
    when (this) {
        is List<*> -> return this[size - 1] as T
        else -> {
            val iterator = iterator()
            if (!iterator.hasNext())
                throw IllegalArgumentException("Collection is empty")
            var last = iterator.next()
            while (iterator.hasNext())
                last = iterator.next()
            return last
        }
    }
    
}

/**
 * Returns last element
 */
public fun <T> Iterable<T>.last() : T {
    when (this) {
        is List<*> -> return this[size - 1] as T
        else -> {
            val iterator = iterator()
            if (!iterator.hasNext())
                throw IllegalArgumentException("Collection is empty")
            var last = iterator.next()
            while (iterator.hasNext())
                last = iterator.next()
            return last
        }
    }
    
}

/**
 * Returns last element
 */
public fun <T> List<T>.last() : T {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun <T> Array<T>.last() : T {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun ByteArray.last() : Byte {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun CharArray.last() : Char {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun DoubleArray.last() : Double {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun LongArray.last() : Long {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun IntArray.last() : Int {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun ShortArray.last() : Short {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun BooleanArray.last() : Boolean {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element
 */
public fun FloatArray.last() : Float {
    if (size == 0)
        throw IllegalArgumentException("Collection is empty")
    return this[size - 1]
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun <T> Stream<T>.last(predicate: (T) -> Boolean) : T {
    fun Iterator<T>.first() : T {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun <T> Iterable<T>.last(predicate: (T) -> Boolean) : T {
    fun Iterator<T>.first() : T {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun <T> Array<T>.last(predicate: (T) -> Boolean) : T {
    fun Iterator<T>.first() : T {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun ByteArray.last(predicate: (Byte) -> Boolean) : Byte {
    fun Iterator<Byte>.first() : Byte {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun CharArray.last(predicate: (Char) -> Boolean) : Char {
    fun Iterator<Char>.first() : Char {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun DoubleArray.last(predicate: (Double) -> Boolean) : Double {
    fun Iterator<Double>.first() : Double {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun LongArray.last(predicate: (Long) -> Boolean) : Long {
    fun Iterator<Long>.first() : Long {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun IntArray.last(predicate: (Int) -> Boolean) : Int {
    fun Iterator<Int>.first() : Int {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun ShortArray.last(predicate: (Short) -> Boolean) : Short {
    fun Iterator<Short>.first() : Short {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun BooleanArray.last(predicate: (Boolean) -> Boolean) : Boolean {
    fun Iterator<Boolean>.first() : Boolean {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*
 */
public fun FloatArray.last(predicate: (Float) -> Boolean) : Float {
    fun Iterator<Float>.first() : Float {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var last = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun <T> Stream<T>.lastOrNull(predicate: (T) -> Boolean) : T? {
    fun Iterator<T>.first() : T? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun <T> Iterable<T>.lastOrNull(predicate: (T) -> Boolean) : T? {
    fun Iterator<T>.first() : T? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun <T> Array<T>.lastOrNull(predicate: (T) -> Boolean) : T? {
    fun Iterator<T>.first() : T? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun ByteArray.lastOrNull(predicate: (Byte) -> Boolean) : Byte? {
    fun Iterator<Byte>.first() : Byte? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun CharArray.lastOrNull(predicate: (Char) -> Boolean) : Char? {
    fun Iterator<Char>.first() : Char? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun DoubleArray.lastOrNull(predicate: (Double) -> Boolean) : Double? {
    fun Iterator<Double>.first() : Double? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun LongArray.lastOrNull(predicate: (Long) -> Boolean) : Long? {
    fun Iterator<Long>.first() : Long? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun IntArray.lastOrNull(predicate: (Int) -> Boolean) : Int? {
    fun Iterator<Int>.first() : Int? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun ShortArray.lastOrNull(predicate: (Short) -> Boolean) : Short? {
    fun Iterator<Short>.first() : Short? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun BooleanArray.lastOrNull(predicate: (Boolean) -> Boolean) : Boolean? {
    fun Iterator<Boolean>.first() : Boolean? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns last element matching the given *predicate*, or null if element was not found
 */
public fun FloatArray.lastOrNull(predicate: (Float) -> Boolean) : Float? {
    fun Iterator<Float>.first() : Float? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var last = iterator.first()
    if (last == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            last = element
    }
    return last
    
}

/**
 * Returns single element
 */
public fun <T> Stream<T>.single() : T {
    when (this) {
        is List<*> -> return if (size == 1) this[0] as T else throw IllegalArgumentException("Collection has $size elements")
        else -> {
            val iterator = iterator()
            if (!iterator.hasNext())
                throw IllegalArgumentException("Collection is empty")
            var single = iterator.next()
            if (iterator.hasNext())
                throw IllegalArgumentException("Collection has more than one element")
            return single
        }
    }
    
}

/**
 * Returns single element
 */
public fun <T> Iterable<T>.single() : T {
    when (this) {
        is List<*> -> return if (size == 1) this[0] as T else throw IllegalArgumentException("Collection has $size elements")
        else -> {
            val iterator = iterator()
            if (!iterator.hasNext())
                throw IllegalArgumentException("Collection is empty")
            var single = iterator.next()
            if (iterator.hasNext())
                throw IllegalArgumentException("Collection has more than one element")
            return single
        }
    }
    
}

/**
 * Returns single element
 */
public fun <T> Array<T>.single() : T {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun ByteArray.single() : Byte {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun CharArray.single() : Char {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun DoubleArray.single() : Double {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun LongArray.single() : Long {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun IntArray.single() : Int {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun ShortArray.single() : Short {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun BooleanArray.single() : Boolean {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element
 */
public fun FloatArray.single() : Float {
    if (size != 1)
        throw IllegalArgumentException("Collection has $size elements")
    return this[0]
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun <T> Stream<T>.single(predicate: (T) -> Boolean) : T {
    fun Iterator<T>.first() : T {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun <T> Iterable<T>.single(predicate: (T) -> Boolean) : T {
    fun Iterator<T>.first() : T {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun <T> Array<T>.single(predicate: (T) -> Boolean) : T {
    fun Iterator<T>.first() : T {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun ByteArray.single(predicate: (Byte) -> Boolean) : Byte {
    fun Iterator<Byte>.first() : Byte {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun CharArray.single(predicate: (Char) -> Boolean) : Char {
    fun Iterator<Char>.first() : Char {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun DoubleArray.single(predicate: (Double) -> Boolean) : Double {
    fun Iterator<Double>.first() : Double {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun LongArray.single(predicate: (Long) -> Boolean) : Long {
    fun Iterator<Long>.first() : Long {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun IntArray.single(predicate: (Int) -> Boolean) : Int {
    fun Iterator<Int>.first() : Int {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun ShortArray.single(predicate: (Short) -> Boolean) : Short {
    fun Iterator<Short>.first() : Short {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun BooleanArray.single(predicate: (Boolean) -> Boolean) : Boolean {
    fun Iterator<Boolean>.first() : Boolean {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*
 */
public fun FloatArray.single(predicate: (Float) -> Boolean) : Float {
    fun Iterator<Float>.first() : Float {
        for (element in this) if (predicate(element)) return element
        throw IllegalArgumentException("Collection doesn't have matching element")
    }
    val iterator = iterator()
    var single = iterator.first()
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun <T> Stream<T>.singleOrNull(predicate: (T) -> Boolean) : T? {
    fun Iterator<T>.first() : T? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun <T> Iterable<T>.singleOrNull(predicate: (T) -> Boolean) : T? {
    fun Iterator<T>.first() : T? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun <T> Array<T>.singleOrNull(predicate: (T) -> Boolean) : T? {
    fun Iterator<T>.first() : T? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun ByteArray.singleOrNull(predicate: (Byte) -> Boolean) : Byte? {
    fun Iterator<Byte>.first() : Byte? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun CharArray.singleOrNull(predicate: (Char) -> Boolean) : Char? {
    fun Iterator<Char>.first() : Char? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun DoubleArray.singleOrNull(predicate: (Double) -> Boolean) : Double? {
    fun Iterator<Double>.first() : Double? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun LongArray.singleOrNull(predicate: (Long) -> Boolean) : Long? {
    fun Iterator<Long>.first() : Long? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun IntArray.singleOrNull(predicate: (Int) -> Boolean) : Int? {
    fun Iterator<Int>.first() : Int? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun ShortArray.singleOrNull(predicate: (Short) -> Boolean) : Short? {
    fun Iterator<Short>.first() : Short? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun BooleanArray.singleOrNull(predicate: (Boolean) -> Boolean) : Boolean? {
    fun Iterator<Boolean>.first() : Boolean? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

/**
 * Returns single element matching the given *predicate*, or null if element was not found
 */
public fun FloatArray.singleOrNull(predicate: (Float) -> Boolean) : Float? {
    fun Iterator<Float>.first() : Float? {
        for (element in this) if (predicate(element)) return element
        return null
    }
    val iterator = iterator()
    var single = iterator.first()
    if (single == null)
        return null
    while (iterator.hasNext()) {
        val element = iterator.next()
        if (predicate(element))
            throw IllegalArgumentException("Collection has more than one matching element")
    }
    return single
    
}

